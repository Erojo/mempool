<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1, width=device-width">
        <link rel="stylesheet" href="style.css">
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <title>Mempool Recommended Fees</title>
    </head>
    <body>
        <h1>Mempool Recommended Fees</h1>
        <h2><label id="time"></label></h2>
        <h3>
            <table>
            </table>
        </h3>
    </body>
    <script>
        $(document).ready(function(){

            var myVar = setInterval(myTimer, 1000);
            getRecommFees();
            //var myVar2 = setInterval(getRecommFees, 5000);
 
        });
        function myTimer() {
            var d = new Date();
            document.getElementById("time").innerHTML = d.toLocaleTimeString();
        }
        function getRecommFees(){
            $.get('https://mempool.space/api/v1/fees/recommended', function(data){
                console.log(data);
                var tableData = "";
                tableData += "<tr>";
                for (let key in data) {
                    tableData += "<th>" + key + "</th>";
                };
                tableData += "</tr>";
                tableData += "<tr>";
                for (let key in data) {
                    console.log(key);
                    console.log(data[key]);
                    tableData += "<td>" + data[key] + "</td>";
                };
                tableData += "</tr>";                    
                document.querySelector('table').innerHTML = tableData;
            });
        }
    </script>        
</html>